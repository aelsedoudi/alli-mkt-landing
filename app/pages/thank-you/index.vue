<template>
  <section class="home">
    <div class="form-section p-6 pt-20 md:pt-20 mx-auto flex flex-wrap flex-col justify-items-stretch">
      <span id="form-anchor" class="form-title mx-auto my-4">Thank you for signing up!</span>
      <span class="disclaimer mx-auto mb-6">NO PURCHASE NECESSARY. Open to Boise State and Montana State students who are 18 years of age or older. Starts 8/16/22 and ends 9/22/22. Void where prohibited. <a href="https://alliancesalesinc.com/privacy-policy/#">Terms and Conditions</a> apply. Winner will be notified via email.</span>
      <div class="smiley mx-auto relative">
        <img
          alt="Smiley Mobile"
          class="flex z-10 -mb-20 mx-auto md:hidden lg:hidden xl:hidden"
          src="/images/uploads/SmileyMobile.png"
        />
        <img
          alt="Smiley"
          class="hidden z-10 -mb-24 mx-auto w-1/2 md:flex lg:flex xl:flex"
          src="/images/uploads/SmileyFull.png"
        />
      </div>
    </div>
    <div class="product-section mx-auto flex flex-wrap flex-row md:flex-row justify-items-stretch">
      <div class="product product-odd lg:mx-auto flex flex-wrap flex-row md:flex-row justify-items-stretch">
        <div class="product-image flex flex-row w-1/2 justify-center lg:items-start overflow-y-hidden">
          <img
            alt="Stash Tea Product Mobile"
            class="flex w-full md:hidden lg:hidden xl:hidden"
            src="/images/uploads/LemonGingerSoother.png"
          />
          <img
            alt="Stash Tea Product Desktop"
            class="hidden md:flex lg:flex xl:flex"
            src="/images/uploads/StashBig.jpg"
          />
        </div>
        <div class="product-description flex flex-col p-4 pr-2 w-1/2 justify-center md:px-10 lg:items-start overflow-y-hidden">
           <img
            alt="Stash Logo Desktop"
            class="product-logo mx-auto px-16 hidden md:flex lg:flex xl:flex"
            src="/images/uploads/StashLogoBig.png"
          />
          <img
            alt="Stash Logo Mobile"
            class="product-logo mx-auto flex md:hidden lg:hidden xl:hidden"
            src="/images/uploads/Stash_Logo.png"
          />
          <span class="py-2">
            Don’t worry about the ingredients, Stash Tea doesn’t fake anything.  You won’t find anything artificial in these tea bags, only thoughtfully curated blends consisting of the finest herbs and spices. 
          </span>
          <ul class="md:px-4">
            <li>
              Non-GMO Verified
            </li>
            <li>
              Kosher
            </li>
            <li>
              All Natural Ingredients
            </li>
          </ul>
        </div>
      </div>
      <div class="product product-even lg:mx-auto flex flex-wrap flex-row md:flex-row justify-items-stretch">
        <div class="product-description flex flex-col p-4 pr-2 w-1/2 justify-center md:px-10 lg:items-start overflow-y-hidden">
           <img
            alt="N!cks Logo Mobile"
            class="product-logo mx-auto flex md:hidden lg:hidden xl:hidden"
            src="/images/uploads/Nicks_Logo_Color_CMYK.png"
          />
          <img
            alt="N!cks Logo Desktop"
            class="product-logo mx-auto px-16 hidden md:flex lg:flex xl:flex"
            src="/images/uploads/NicksLogoBig.png"
          />
          <span class="py-2">
            By prioritizing both health and taste, Nick’s Keto and Protein Snack Bars are both indulgent and better-for-you. After all, you should never choose between your health and great taste. And lucky for you, you’re the first to try us in your area. Be on the lookout for us in your local grocery store soon!
          </span>
          <ul class="md:px-4">
            <li>
              No Sugar Added
            </li>
            <li>
              15g of Protein
            </li>
            <li>
              3g Net Carbs
            </li>
          </ul>
        </div>
        <div class="product-image flex flex-row w-1/2 justify-center lg:items-start overflow-y-hidden">
          <img
            alt="N!cks Product Mobile"
            class="flex w-full md:hidden lg:hidden xl:hidden"
            src="/images/uploads/Nicks_BarLaunch_Camp.png"
          />
          <img
            alt="N!cks Product Desktop"
            class="hidden md:flex lg:flex xl:flex"
            src="/images/uploads/NicksBig.jpg"
          />
        </div>
      </div>
      <div class="product product-odd lg:mx-auto flex flex-wrap flex-row md:flex-row justify-items-stretch">
        <div class="product-image flex flex-row w-1/2 justify-center lg:items-start overflow-y-hidden">
          <img
            alt="White Castle Product Mobile"
            class="flex w-full md:hidden lg:hidden xl:hidden"
            src="/images/uploads/Retail_ChickenCheese.png"
          />
          <img
            alt="White Castle Product Desktop"
            class="hidden md:flex lg:flex xl:flex"
            src="/images/uploads/WhiteCastleBig.jpg"
          />
        </div>
        <div class="product-description flex flex-col p-4 pr-2 w-1/2 justify-center md:px-10 lg:items-start overflow-y-hidden">
          <img
            alt="White Castle Logo"
            class="product-logo mx-auto flex md:hidden lg:hidden xl:hidden"
            src="/images/uploads/WC_NEW_TYPE_1C.png"
          />
          <img
            alt="White Castle Desktop"
            class="product-logo mx-auto px-16 hidden md:flex lg:flex xl:flex"
            src="/images/uploads/WCLogoBig.png"
          />
          <span class="py-2">
            Late-night cravings hit, and White Castle® has you covered with their one-of-a-kind new Chicken & Cheese Sliders. This savory melty goodness is perfect for when you’re craving a #sliderbreak. Find them in the freezer aisle and Long Live Sliders™!
          </span>
          <ul class="md:px-4">
            <li>
              13g+ of Protein
            </li>
            <li>
              Easy to Heat. Fun to Eat.
            </li>
            <li>
              100+ White Meat Chicken
            </li>
          </ul>
        </div>
      </div>
      <div class="product product-even lg:mx-auto flex flex-wrap flex-row md:flex-row justify-items-stretch">
        <div class="product-description flex flex-col p-4 pr-2 w-1/2 justify-center md:px-10 lg:items-start overflow-y-hidden">
          <img
            alt="Hunter Mix Logo Desktop"
            class="product-logo mx-auto px-16 hidden md:flex lg:flex xl:flex"
            src="/images/uploads/HunterMixLogoBig.png"
          />
          <img
            alt="Hunter Mix Logo Mobile"
            class="product-logo mx-auto flex md:hidden lg:hidden xl:hidden"
            src="/images/uploads/HunterMixLogo.png"
          />
          <span class="py-2">
            This is worth going nuts for. Whether it’s for a quick snack on the way to class, or a delicious crunch to any meal, Hunter Mix is the perfect treat for any tastebud. Want something salty? They have it. Want something sweet? They have it.
          </span>
          <ul class="md:px-4">
            <li>
              Good Source of Protein
            </li>
            <li>
              Filled with good eats
            </li>
            <li>
              Vegetarian
            </li>
          </ul>
        </div>
        <div class="product-image flex flex-row w-1/2 justify-center lg:items-start overflow-y-hidden">
          <img
            alt="Hunter Mix Product Mobile"
            class="flex w-full md:hidden lg:hidden xl:hidden"
            src="/images/uploads/HunterMixBowl.png"
          />
          <img
            alt="Hunter Mix Product Desktop"
            class="hidden md:flex lg:flex xl:flex"
            src="/images/uploads/HunterMixBig.jpg"
          />
        </div>
      </div>
    </div>
  </section>
</template>

<script lang="ts">
import { Component, Vue } from 'nuxt-property-decorator';
import settings from '@/content/settings/general.json';

@Component({
  // Called to know which transition to apply
  transition() {
    return 'slide-left';
  },
})
export default class Home extends Vue {
  welcomeText = settings.welcomeText;

  get posts(): Post[] {
    return this.$store.state.posts;
  }

  isSignedUp = false;

  form = {
    email: '',
  };

  encode(data): string {
    return Object.keys(data)
      .map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(data[key])}`)
      .join('&');
  }

  validEmail(email): boolean {
    // eslint-disable-next-line
    const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(email);
  }

  async handleSubmit(): Promise<void> {
    if (!this.validEmail(this.form.email)) {
      this.$refs.emailInput.focus();
      return;
    }

    try {
      await fetch('/', {
        method: 'POST',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
        body: this.encode({ 'form-name': 'signups', ...this.form }),
      });

      this.isSignedUp = true;
    } catch (error) {
      console.error(error);
    }
  }
}
</script>
